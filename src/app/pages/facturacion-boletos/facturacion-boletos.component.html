<main class="contenido">
  <h2>Facturación de Boletos</h2>

  <form class="formulario-factura" (ngSubmit)="enviarFormulario()" #formulario="ngForm">

    <!-- BOTONES DE SUBIDA -->
    <div class="upload-buttons-row">
      <input type="file" id="imagenBoleto" (change)="onArchivoSeleccionado($event)" accept="image/*" hidden />
      <label for="imagenBoleto" class="upload-icon-button">
        <img src="assets/subir-boleto.png" alt="Subir boleto" class="upload-icon" />
        <span>Subir Boleto</span>
      </label>

      <input type="file" id="documentoRFC" (change)="onDocumentoRFCSeleccionado($event)" accept=".pdf,image/*" hidden />
      <label for="documentoRFC" class="upload-icon-button">
        <img src="assets/subir-rfc.png" alt="Subir constancia" class="upload-icon" />
        <span>Subir RFC</span>
      </label>
    </div>

    <div class="text-center">
      <button type="button" (click)="analizarImagen(); analizarRFC();" class="btn-btn-primario">
        3. Rellenar datos
      </button>
    </div>

    <!-- TOKEN PRIMERO -->
    <label for="token">Token de Boleto:</label>
    <div class="input-con-icon">
      <input id="token" name="token" type="text" [(ngModel)]="token" required class="input-reducido" />
      <img *ngIf="tokenExtraido" src="assets/check.svg" alt="✓" class="check-icon" />
    </div>
    <p class="error" *ngIf="tokenInvalid">El token no puede estar vacío.</p>

    <!-- RFC DESPUÉS -->
    <label for="rfc">RFC:</label>
    <div class="input-con-icon">
      <input id="rfc" name="rfc" type="text" [(ngModel)]="rfc" required class="input-reducido" />
      <img *ngIf="rfcExtraido" src="assets/check.svg" alt="✓" class="check-icon" />
    </div>
    <p class="error" *ngIf="rfcInvalid">El RFC debe tener entre 12 y 13 caracteres.</p>

    <button type="submit" class="btn-btn-primario">Verificar</button>
  </form>
</main>